server {
    listen 80;
    server_name localhost;

    root /usr/share/nginx/html;  # Path to your built Angular app (index.html, assets, etc.)
    index index.html;

    # Handle all routes correctly for Angular
    location / {
        try_files $uri $uri/ /index.html;  # Try the requested URI, then a directory, and finally fallback to index.html for Angular routing
    }

    # Handle requests for favicon.ico separately to prevent it being caught by the above rule
    location = /favicon.ico {
        log_not_found off;  # Suppress logging for missing favicon.ico
        access_log off;     # No need to log favicon requests
    }

    # Optionally: Handle other static assets (like JS, CSS) to avoid unnecessary redirects
    location /assets/ {
        expires 30d;  # Cache assets for 30 days, tweak as needed
        add_header Cache-Control "public, max-age=2592000";
    }

    # Optional: To catch 404 errors and serve a custom page if necessary
    error_page 404 /404.html;  # Make sure you have a 404.html in the root if needed

    # If you have an API or other specific paths, add location blocks for those.
}
